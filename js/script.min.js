"use strict";const LAPTOP_WIDTH_MEDIA_QUERY="(min-width: 1280px)",MODAL_ANIMATION_DURATION=400,FormEvents={SUBMIT_START:"formSubmitStart",SUBMIT_END:"formSubmitEnd"},KeyCode=Object.freeze({LEFT_ARROW:"ArrowLeft",RIGHT_ARROW:"ArrowRight",DOWN_ARROW:"ArrowDown",UP_ARROW:"ArrowUp",SPACE:"Space",BACKSPACE:"Backspace",ESCAPE:"Escape"});function lockPageScroll(){document.querySelector(".simplebar-content-wrapper").classList.add("scroll-lock")}function unlockPageScroll(){document.querySelector(".simplebar-content-wrapper").classList.remove("scroll-lock")}function createElementByString(e){const t=document.createElement("div");return t.innerHTML=e,t.firstElementChild}function isDownArrowEvent(e){return e.code===KeyCode.DOWN_ARROW}function isEscapeEvent(e){return e.code===KeyCode.ESCAPE}function isLeftArrowEvent(e){return e.code===KeyCode.LEFT_ARROW}function isRightArrowEvent(e){return e.code===KeyCode.RIGHT_ARROW}function isSpaceEvent(e){return e.code===KeyCode.SPACE}function isBackspaceEvent(e){return e.code===KeyCode.BACKSPACE}function isUpArrowEvent(e){return e.code===KeyCode.UP_ARROW}function debounce(e){var t=this;let i,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return function(){for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];clearTimeout(i),i=setTimeout((()=>e.apply(t,o)),s)}}function throttleAndDebounce(e,t){let i,s=0;return function(){for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];const l=(new Date).getTime();l-s>=t&&(s=l,e.apply(this,o)),i&&clearTimeout(i),i=setTimeout((()=>{e.apply(this,o)}),t)}}function getPaginationButtonCreator(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Слайд";return(t,i)=>`\n    <button class='${i}' type='button'>\n      <span class='visually-hidden'>${e} ${t+1}.</span>\n    </button>\n  `}async function sendData(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>{},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>{};try{const s=await fetch(e,{method:"POST",body:t});if(!s.ok){const e=await s.text();throw new Error(`${s.status} – ${s.statusText}: ${e}`)}i(await s.json())}catch(e){console.error(e.message),s()}finally{r()}}class PubSub{constructor(){this.listeners={}}addListener(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}removeListener(e,t){this.listeners[e]&&(this.listeners[e]=this.listeners[e].filter((e=>e!==t)))}emit(e,t){this.listeners[e]&&this.listeners[e].forEach((e=>e(t)))}}class Modal{constructor(e){let{onOpenerClick:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.modalElement=e,this.name=e?.dataset.modal,this.initOpeners(),this.modalElement.addEventListener("close",(()=>this.onModalClose())),this.onOpenerClick=t,this.modalElement.addEventListener("click",(e=>{e.target!==this.modalElement&&!e.target.closest("[data-modal-close-button]")&&e.target.closest(".modal__inner")||(e.preventDefault(),this.close())})),document.body.contains(this.modalElement)||document.body.append(this.modalElement)}initOpeners=()=>{document.querySelectorAll(`[data-modal-opener="${this.name}"]`).forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),this.onOpenerClick&&this.onOpenerClick(e),this.open()}))}))};open=()=>{this.modalElement.showModal()};close=()=>{this.modalElement.close()};onModalClose=()=>{setTimeout((()=>{this.modalElement.classList.contains("modal--with_alert")&&(this.modalElement.remove(),this.modalElement=null)}),400)}}class Alert extends Modal{constructor(e){let{heading:t,button:i,icon:s}=e;const r=Alert.createElement({heading:t,button:i,icon:s});document.body.append(r),super(r),this.button=r.querySelector(".alert__button")}static createElement(e){let{heading:t,button:i,icon:s}=e;return createElementByString(`\n      <dialog class="modal modal--default modal--with_alert">\n        <div class="modal__inner">\n          <button class="modal__button modal__button--close" type="button" data-modal-close-button>\n            <span class="visually-hidden">Закрыть</span>\n          </button>\n          <section class="alert modal__alert ${s&&"alert--with-icon"}">\n            <h2 class="alert__heading">${t}</h2>\n            <button class="alert__button button button--solid-primary ${i.classes||""}" ${!i.text&&"data-modal-close-button"}>\n              <span class="button__inner">\n                <span class="button__text">${i.text||"Закрыть"}</span>\n              </span>\n            </button>\n          </section>\n        </div>\n      </dialog>\n    `)}}class FormValidator{constructor(e){this.formElement=e,this.addCustomErrorMessages(),this.init()}addCustomErrorMessages(){const e=this.formElement.querySelector('[data-name="name"]'),t=this.formElement.querySelector('[data-name="surname"]'),i=this.formElement.querySelector('[data-name="address"]'),s=this.formElement.querySelector('[data-name="phone"]'),r=this.formElement.querySelector('[data-name="email"]'),o=this.formElement.querySelector('[data-name="message"]'),n=this.formElement.querySelector(".subscription-form__field-control");n&&(n.closest(".subscription-form__field").classList.add("pristine-item"),n.dataset.pristineRequiredMessage="Заполните это поле",n.dataset.pristineEmailMessage="Email введен неправильно"),e&&(e.closest(".text-field").classList.add("pristine-item"),e.dataset.pristinePattern="/^[a-zа-яЁё -]+$/i",e.dataset.pristineRequiredMessage="Заполните это поле.",e.dataset.pristinePatternMessage="Допустимы только буквы, дефисы и пробелы."),t&&(t.closest(".text-field").classList.add("pristine-item"),t.dataset.pristinePattern="/^[a-zа-яЁё -]+$/i",t.dataset.pristineRequiredMessage="Заполните это поле.",t.dataset.pristinePatternMessage="Допустимы только буквы, дефисы и пробелы."),i&&(i.closest(".text-field").classList.add("pristine-item"),i.dataset.pristineRequiredMessage="Заполните это поле."),s&&(s.closest(".text-field").classList.add("pristine-item"),s.dataset.pristineRequiredMessage="Заполните это поле."),r&&(r.closest(".text-field").classList.add("pristine-item"),r.dataset.pristineRequiredMessage="Заполните это поле.",r.dataset.pristineEmailMessage="Введите корректный e-mail адрес."),o&&(o.closest(".text-area").classList.add("pristine-item"),o.dataset.pristineRequiredMessage="Заполните это поле.")}validate(){return this.pristine.validate()}reset(){this.pristine.reset(),this.formElement.querySelectorAll(".shake").forEach((e=>e.classList.remove("shake")))}init(){this.pristine=new Pristine(this.formElement,{classTo:"pristine-item",errorClass:"pristine-item--invalid",errorTextParent:"pristine-item",errorTextTag:"p",errorTextClass:"pristine-item__error-text"})}}class Form extends PubSub{constructor(e){super(),this.formElement=e,this.textFieldControlElements=this.formElement.querySelectorAll(".text-field__control, .simple-form__control, .text-area__control"),this.imagesFieldElement=this.formElement.querySelector(".images-field"),this.imagesFieldListElement=this.formElement.querySelector(".images-field__list"),this.actionUrl=this.formElement.action,this.submitButtonElement=this.formElement.querySelector("[data-submit-button]"),this.validator=new FormValidator(this.formElement),this.siteHeaderElement=document.querySelector(".page__site-header"),this.successHandler=null,this.errorHandler=null,this.imagesFieldErrorTextElement=null,this.init()}setHandlers=(e,t)=>{this.successHandler=e,this.errorHandler=t};resetImagesField=()=>{this.imagesFieldListElement&&(this.imagesFieldListElement.querySelectorAll("img").forEach((e=>{URL.revokeObjectURL(e.src)})),this.imagesFieldListElement.innerHTML=""),this.images&&this.images.clear()};initImagesField=e=>{const t=e.querySelector(".images-field__control"),i=e.querySelector(".images-field__list");this.images=new Set,t.addEventListener("change",(e=>{this.imagesFieldErrorTextElement?.remove();Array.from(e.target.files).forEach((e=>{e.type.startsWith("image/")&&PHOTO_TYPES.some((t=>e.name.toLowerCase().endsWith(t)))?this.images.add(e):(this.imagesFieldErrorTextElement=createElementByString('<p class="images-field__error-text">Не удалось загрузить фото, попробуйте снова</p>'),i.insertAdjacentElement("beforebegin",this.imagesFieldErrorTextElement))})),s()}));const s=()=>{const e=document.createDocumentFragment();this.images.forEach((t=>{const i=createElementByString(`\n          <li class="images-field__list-item">\n            <img class="images-field__preview" src=${URL.createObjectURL(t)} alt=''>\n            <button class="images-field__delete-button image-button image-button--size_xs image-button--primary image-button--icon_cross" type="button">\n              <span class="visually-hidden">Удалить фото</span>\n            </button>\n          </li>\n        `),r=i.querySelector(".images-field__preview");i.querySelector(".images-field__delete-button").addEventListener("click",(e=>{this.images.delete(t),s(),URL.revokeObjectURL(r.src)})),e.append(i)})),i.innerHTML="",i.append(e)}};init=()=>{this.imagesFieldElement&&this.initImagesField(this.imagesFieldElement),this.formElement.addEventListener("submit",(e=>{e.preventDefault();if(this.validator.validate()){console.log("Форма валидна"),this.emit(FormEvents.SUBMIT_START),this.submitButtonElement.disabled=!0,this.submitButtonElement.classList.add("button--pending");const t=new FormData(e.target);this.images?.forEach((e=>{t.append("images[]",e)})),sendData(this.actionUrl,t,(e=>{this.successHandler(e),this.formElement.matches(".modal-entry__form--code")||this.formElement.reset()}),(e=>{this.errorHandler(e)}),(()=>{this.emit(FormEvents.SUBMIT_END),this.submitButtonElement.disabled=!1,this.submitButtonElement.classList.remove("button--pending")}))}else if(console.log("Форма невалидна"),this.formElement.matches(".simple-form")){const e=this.formElement.querySelector(".simple-form__inner");e.classList.remove("shake"),requestAnimationFrame((()=>e.classList.add("shake"))),e.querySelector("input").focus()}else{const e=this.formElement.querySelector(".pristine-item--invalid"),t=e?.closest(".modal");t?t.scrollTo({top:e.offsetTop,behavior:"smooth"}):window.scrollTo({top:e.offsetTop-this.siteHeaderElement.offsetHeight,behavior:"smooth"}),e.querySelector("input, textarea").focus(),e.classList.remove("shake"),requestAnimationFrame((()=>e.classList.add("shake")))}})),this.formElement.addEventListener("reset",(()=>{setTimeout((()=>{this.textFieldControlElements?.forEach((e=>{e.dispatchEvent(inputEvent)})),this.resetImagesField(),this.validator.reset()}),0)}))}}class ModalForm extends Modal{constructor(e){super(e),this.formElement=e.querySelector(".modal-form"),this.form=new Form(this.formElement)}setHandlers=(e,t)=>{this.form.setHandlers((()=>{e(),this.modalElement.close()}),(()=>{t()}))}}class ModalEntry extends Modal{RESEND_TIME_INTERVAL=7;timer=0;RUSSIAN_PHONE_NUMBER_LENGTH=11;ERROR_MESSAGE_DURATION=5e3;constructor(e){super(e),this.codeFormElement=e.querySelector(".modal-entry__form--code"),this.phoneFieldElement=this.codeFormElement.querySelector(".modal-entry__phone-field .text-field__control"),this.phoneFieldMask=null,this.phoneFormatTogglerElement=this.codeFormElement.querySelector(".modal-entry__phone-format-toggler"),this.isRussianPhoneFormat=!0,this.loginFormElement=e.querySelector(".modal-entry__form--login"),this.currentPhoneTextElement=this.loginFormElement.querySelector("[data-current-phone-text]"),this.resendElement=this.loginFormElement.querySelector(".modal-entry__resend"),this.resendTimerElement=this.resendElement.querySelector(".modal-entry__resend-timer"),this.resendButtonElement=this.resendElement.querySelector(".modal-entry__resend-button"),this.loginFormSubmitButtonElement=this.loginFormElement.querySelector(".modal-entry__submit-button"),this.codeFieldsWrapperElement=this.loginFormElement.querySelector(".modal-entry__code-fields"),this.codeFieldElements=Array.from(this.codeFieldsWrapperElement.querySelectorAll(".modal-entry__code-field .text-field__control")),this.init()}showCodeFormErrorMessage=()=>{this.codeFormElement.classList.add("modal-entry__form--error"),setTimeout((()=>{this.codeFormElement.classList.remove("modal-entry__form--error")}),this.ERROR_MESSAGE_DURATION)};showLoginFormErrorMessage=()=>{this.loginFormElement.classList.add("modal-entry__form--error"),setTimeout((()=>{this.loginFormElement.classList.remove("modal-entry__form--error")}),this.ERROR_MESSAGE_DURATION)};enableRussianPhoneFormat=()=>{this.phoneFieldElement.placeholder="+7 (_ _ _) _ _ _-_ _-_ _",this.phoneFieldMask?.destroy(),this.phoneFieldMask=new IMask(this.phoneFieldElement,{mask:"+{7} (000) 000-00-00"}),this.isRussianPhoneFormat=!0};disableRussianPhoneFormat=()=>{this.phoneFieldMask?.destroy(),this.phoneFieldElement.placeholder="",this.phoneFieldMask=new IMask(this.phoneFieldElement,{mask:"00000000000000000"}),this.isRussianPhoneFormat=!1};onPhoneFormatTogglerClick=()=>{this.isRussianPhoneFormat?(this.disableRussianPhoneFormat(),this.phoneFormatTogglerElement.querySelector(".button__text").textContent="Российский номер"):(this.enableRussianPhoneFormat(),this.phoneFormatTogglerElement.querySelector(".button__text").textContent="Другой формат номера")};validatePhoneField=()=>!!this.phoneFieldElement.value&&!(this.isRussianPhoneFormat&&this.phoneFieldMask.unmaskedValue.length<this.RUSSIAN_PHONE_NUMBER_LENGTH);validateCodeFields=()=>this.codeFieldElements.every((e=>e.value));onCodeFieldsWrapperInput=()=>{this.validateCodeFields()?(this.loginFormSubmitButtonElement.disabled=!1,this.loginFormSubmitButtonElement.classList.remove("button--disabled")):(this.loginFormSubmitButtonElement.disabled=!0,this.loginFormSubmitButtonElement.classList.add("button--disabled"))};startTimer=()=>{if(this.timer<=0){this.timer=this.RESEND_TIME_INTERVAL,this.resendTimerElement.textContent=this.timer,this.resendElement.classList.add("modal-entry__resend--waiting");const e=setInterval((()=>{this.timer--,this.resendTimerElement.textContent=this.timer,this.timer<=0&&(clearInterval(e),this.resendElement.classList.remove("modal-entry__resend--waiting"))}),1e3)}};switchStep=e=>{1===e?(this.codeFormElement.classList.remove("modal-entry__form--hidden"),this.loginFormElement.classList.add("modal-entry__form--hidden")):2===e&&(this.startTimer(),this.currentPhoneTextElement.textContent=this.phoneFieldElement.value,this.codeFormElement.classList.add("modal-entry__form--hidden"),this.loginFormElement.classList.remove("modal-entry__form--hidden"))};init=()=>{this.enableRussianPhoneFormat(),this.phoneFormatTogglerElement.addEventListener("click",this.onPhoneFormatTogglerClick),this.resendButtonElement.addEventListener("click",(e=>{e.preventDefault(),this.startTimer()})),this.codeFieldElements.forEach(((e,t)=>{e.addEventListener("input",(()=>{e.value=e.value.slice(0,1),e.value.length&&t<+this.codeFieldElements.length-1&&this.codeFieldElements[t+1].focus()})),e.addEventListener("keydown",(i=>{isBackspaceEvent(i)&&!e.value&&t>0&&this.codeFieldElements[t-1].focus()}))})),this.codeFieldsWrapperElement.addEventListener("input",this.onCodeFieldsWrapperInput)}}class Product{CART_NOTIFICATION_DURATION=3e3;constructor(e){this.formElement=e.querySelector(".product__inner"),this.cartNotificationElement=document.querySelector(".cart-notification"),this.sizeCheckboxElements=Array.from(e.querySelectorAll(".size-buttons__control")),this.counterElement=e.querySelector(".product__cart-counter .counter__control"),this.counterButtonMinusElement=e.querySelector(".product__cart-counter .counter__button--minus"),this.sizeModalElement=document.querySelector('[data-modal="size"]'),this.sizeModalFormElement=this.sizeModalElement.querySelector(".modal-size"),this.sizeModalCheckboxElements=Array.from(this.sizeModalFormElement.querySelectorAll(".size-buttons__control")),this.sizeModalSubmitButtonElement=this.sizeModalFormElement.querySelector(".modal-size__button"),this.sizeModal=null,this.form=null,this.init()}lockSizeModalSubmitButton=()=>{this.sizeModalSubmitButtonElement.disabled=!0,this.sizeModalSubmitButtonElement.classList.add("button--disabled")};unlockSizeModalSubmitButton=()=>{this.sizeModalSubmitButtonElement.disabled=!1,this.sizeModalSubmitButtonElement.classList.remove("button--disabled")};checkSelectedSizeInModalForm=()=>this.sizeModalCheckboxElements.some((e=>e.checked));setSizeModalSubmitButtonState=()=>{this.checkSelectedSizeInModalForm()?this.unlockSizeModalSubmitButton():this.lockSizeModalSubmitButton()};setCounterValue=e=>{const t=+this.counterElement.min;this.counterElement.value=e,this.counterButtonMinusElement.disabled=+this.counterElement.value<=t};onSizeModalFormChange=()=>{this.setSizeModalSubmitButtonState()};checkSelectedSize=()=>this.sizeCheckboxElements.some((e=>e.checked));setAddedToCartView=()=>{productElement.classList.add("product--in-cart")};setDefaultView=()=>{productElement.classList.remove("product--in-cart")};showCartNotification=()=>{this.cartNotificationElement.show(),setTimeout((()=>{this.cartNotificationElement.close()}),this.CART_NOTIFICATION_DURATION)};openSizeModal=()=>{this.sizeModal.open()};closeSizeModal=()=>{this.sizeModal.close()};init(){this.sizeModal=new Modal(this.sizeModalElement),this.sizeModalFormElement.addEventListener("change",this.onSizeModalFormChange)}}class Cart{constructor(e){this.siteHeaderElement=document.querySelector(".page__site-header"),this.cartElement=e,this.formElement=this.cartElement.querySelector(".cart__form"),this.init()}toggleFormFooterStickiness=()=>{if(laptopWidthMediaQueryList.matches)return;const e=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight),t=document.documentElement.clientHeight+window.scrollY>=e;this.formFooterElement.classList.toggle("cart-form__footer--sticked",!t)};setPageBottomIndent=()=>{if(laptopWidthMediaQueryList.matches)document.body.style.paddingBottom=0;else{const e=parseFloat(getComputedStyle(this.formFooterElement).bottom);document.body.style.paddingBottom=`${this.formFooterElement.offsetHeight+e}px`}};onWindowResize=debounce(this.setPageBottomIndent,500);onWindowScroll=throttle(this.toggleFormFooterStickiness,100);onReceivingMethodSectionChange=e=>{"delivery"===e.target.dataset.value?(this.receivingMethodSectionElement.insertAdjacentElement("afterend",this.deliverySectionElement),this.form.validator.reset(),this.form.validator.init()):(this.deliverySectionElement.remove(),this.form.validator.reset(),this.form.validator.init())};init(){this.formElement&&(this.formFooterElement=this.formElement.querySelector(".cart-form__footer"),this.form=new Form(this.formElement),this.productsList=this.formElement.querySelector(".cart-form__products-list"),this.deliverySectionElement=this.formElement.querySelector("[data-delivery-section]"),this.receivingMethodSectionElement=this.formElement.querySelector("[data-receiving-method-section]"),this.deliverySectionElement.querySelectorAll(".text-field").forEach(initTextField),this.deliverySectionElement.remove(),this.form.validator.init(),this.setPageBottomIndent(),this.toggleFormFooterStickiness(),window.addEventListener("resize",this.onWindowResize),window.addEventListener("scroll",this.onWindowScroll),this.receivingMethodSectionElement.addEventListener("change",this.onReceivingMethodSectionChange))}}class Taber{constructor(e){this.taberElement=e,this.init()}switchTab=(e,t,i)=>{if(e){e.ariaSelected=null,e.tabIndex=-1,e.classList.remove("taber__tab--active");const t=this.tabElements.indexOf(e);this.panelElements[t].classList.add("taber__panel--hidden")}i||t.focus(),t.tabIndex=0,t.ariaSelected=!0,t.classList.add("taber__tab--active");const s=this.tabElements.indexOf(t);this.panelElements[s].classList.remove("taber__panel--hidden")};openStartTab=()=>{const e=window.location.hash,t=this.tabElements.find((t=>t.hash===e));this.switchTab(null,t||this.tabElements[0],!0)};onTaberListClick=e=>{e.preventDefault();const t=e.target.closest(".taber__tab");if(!t)return;const i=this.listElement.querySelector("[aria-selected]");t!==i&&this.switchTab(i,t)};onTaberListKeydown=e=>{const t=this.tabElements.indexOf(e.target);if(isDownArrowEvent(e)||isLeftArrowEvent(e)||isRightArrowEvent(e))if(e.preventDefault(),isDownArrowEvent(e))this.panelElements[t].focus();else{const i=isLeftArrowEvent(e)?t-1:t+1;if(!this.tabElements[i])return;this.switchTab(e.target,this.tabElements[i])}};init(){this.id=this.taberElement.id,this.listElement=this.taberElement.querySelector(".taber__list"),this.tabElements=Array.from(this.listElement.querySelectorAll(".taber__tab")),this.panelElements=this.taberElement.querySelectorAll(".taber__panel"),this.listElement.setAttribute("role","tablist"),this.tabElements.forEach(((e,t)=>{e.role="tab",e.id=`${this.id}-tab-${t+1}`,e.href=`#${this.id}-panel-${t+1}`,e.tabIndex=-1,e.parentNode.role="presentation"})),this.panelElements.forEach(((e,t)=>{e.role="tabpanel",e.id=`${this.id}-panel-${t+1}`,e.tabIndex=-1,e.setAttribute("aria-labelledby",this.tabElements[t].id),e.classList.add("taber__panel--hidden")})),this.openStartTab(),this.listElement.addEventListener("click",this.onTaberListClick),this.listElement.addEventListener("keydown",this.onTaberListKeydown)}}class Reviews{constructor(e){this.reviewsElement=e,this.listElement=e.querySelector(".reviews-list"),this.init()}updateReviewsTextWrappersList=()=>{this.reviewTextWrapperElements=this.listElement.querySelectorAll(".review__text-wrapper")};setReviewsTextWrappersMode=()=>{this.reviewTextWrapperElements.forEach((e=>{const t=e.classList.contains("review__text-wrapper--clipped");e.classList.add("review__text-wrapper--clipped");const i=e.querySelector(".review__text");i.scrollHeight-i.offsetHeight>5?e.classList.add("review__text-wrapper--clippable"):e.classList.remove("review__text-wrapper--clippable"),t||e.classList.remove("review__text-wrapper--clipped")}))};onWindowResize=debounce(this.setReviewsTextWrappersMode,500);onListClick=e=>{const t=e.target.closest(".review__toggle-button");if(t){t.closest(".review__text-wrapper").classList.toggle("review__text-wrapper--clipped")}};init(){this.updateReviewsTextWrappersList(),this.setReviewsTextWrappersMode(),window.addEventListener("resize",this.onWindowResize),this.listElement.addEventListener("click",this.onListClick)}}class Video{constructor(e){this.videoElement=e,this.posterElement=e.querySelector(".video__poster"),this.playButtonWrapperElement=e.querySelector(".video__play-button-wrapper"),this.playButtonElement=e.querySelector(".video__play-button"),this.playerElement=e.querySelector(".video__player"),this.init()}play=()=>{this.playerElement.play(),this.playButtonWrapperElement.classList.add("video__play-button-wrapper--hidden"),this.posterElement.classList.add("video__poster--hidden")};init(){this.playButtonElement.addEventListener("click",(()=>{this.play()})),this.playerElement.addEventListener("ended",(()=>{this.playButtonWrapperElement.classList.remove("video__play-button-wrapper--hidden"),this.posterElement.classList.remove("video__poster--hidden")}))}}let activeButtonElement=null;function onDocumentClickWhileArticlePhotosButtonExpanded(e){!e.target.closest(".article__photos button")&&activeButtonElement&&(activeButtonElement.ariaExpanded="false",activeButtonElement=null),document.removeEventListener("click",onDocumentClickWhileArticlePhotosButtonExpanded)}function initArticlePhotos(e){e.addEventListener("click",(e=>{const t=e.target.closest(".article__photos button");if(!t)return;activeButtonElement&&activeButtonElement!==t&&(activeButtonElement.ariaExpanded="false");"true"===t.ariaExpanded?(t.ariaExpanded="false",activeButtonElement=null,document.removeEventListener("click",onDocumentClickWhileArticlePhotosButtonExpanded)):(t.ariaExpanded="true",activeButtonElement=t,document.addEventListener("click",onDocumentClickWhileArticlePhotosButtonExpanded)),e.stopPropagation()}))}function initArticleSeasons(e){const t=createElementByString('\n    <div class="seasons-slider swiper">\n      <p class="seasons-slider__pagination"></p>\n    </div>\n  '),i=e.querySelector("ul");t.append(i),i.classList.add("seasons-slider__list","swiper-wrapper");const s=i.querySelectorAll("li");s.forEach((e=>e.classList.add("seasons-slider__item","swiper-slide"))),e.append(t),new Swiper(t,{effect:"flip",speed:600,loop:!0,grabCursor:!0,pagination:{el:".seasons-slider__pagination",clickable:!0,bulletClass:"seasons-slider__pagination-button",bulletActiveClass:"seasons-slider__pagination-button--active",renderBullet:(e,t)=>`\n        <button class='${t}' type='button'>\n          ${s[e].dataset.label}\n        </button>\n      `}})}function initBrandsSlider(e){const t=e.querySelector(".brands__slider"),i=e.querySelector(".slider-arrows__button--prev"),s=e.querySelector(".slider-arrows__button--next");new Swiper(t,{slidesPerView:"auto",spaceBetween:28,grabCursor:!0,navigation:{prevEl:i,nextEl:s,disabledClass:"slider-arrows__button--disabled",lockClass:"slider-arrows__button--hidden"},breakpoints:{768:{slidesPerView:"auto",spaceBetween:60},1280:{slidesPerView:"auto",spaceBetween:103},1600:{slidesPerView:"auto",spaceBetween:144}}})}function initCatalogFilter(e,t){const i=e.querySelector(".catalog__filter-button"),s=e.querySelector(".catalog__filter-wrapper"),r=e.querySelector(".catalog__header"),o=s.querySelector(".catalog-filter__close-button"),n=e.querySelector(".catalog__body"),l=s.querySelectorAll(".checker__control"),a=s.querySelector(".catalog-filter__clear-button"),c=()=>{s.style.height=`${Math.min(document.documentElement.clientHeight,document.documentElement.clientHeight-r.getBoundingClientRect().bottom)}px`};function d(){e.classList.remove("catalog--filter-open"),n.removeEventListener("click",u)}function u(e){e.target.closest(".catalog__filter-wrapper")||d()}i.addEventListener("click",(()=>{e.classList.contains("catalog--filter-open")?d():(c(),e.classList.add("catalog--filter-open"),n.addEventListener("click",u))})),o.addEventListener("click",(e=>{d()})),window.addEventListener("resize",(()=>{e.classList.contains("catalog--filter-open")&&c()})),new SimpleBar(e.querySelector(".catalog-filter__sections"),{autoHide:!1}),a.addEventListener("click",(()=>{l.forEach((e=>{e.checked=!1,e.dispatchEvent(inputEvent)}))})),t.addEventListener("scroll",(()=>{e.classList.contains("catalog--filter-open")&&c()}))}function initCatalogPreviewSlider(e){const t=e.querySelector(".slider-pagination");new Swiper(e,{slidesPerView:"auto",spaceBetween:10,pagination:{el:t,type:"progressbar"},breakpoints:{390:{slidesPerView:2,spaceBetween:10},580:{slidesPerView:3,spaceBetween:10},790:{slidesPerView:4,spaceBetween:10},1280:{slidesPerView:4,spaceBetween:20}}})}function initCatalogSorting(e){function t(t){(t.target.closest(".catalog__sorting")!==e||t.target.matches(".catalog__sorting-list"))&&(t.preventDefault(),i())}function i(){e.classList.remove("catalog__sorting--open"),document.removeEventListener("click",t)}e.addEventListener("click",(s=>{if(s.target.closest(".catalog__sorting-toggle-button"))e.classList.contains("catalog__sorting--open")?i():(e.classList.add("catalog__sorting--open"),setTimeout((()=>{document.addEventListener("click",t)}),0));else{const t=s.target.closest(".catalog__sorting-link");if(!t)return;e.querySelector(".catalog__sorting-toggle-button").textContent=t.textContent,e.querySelector(".catalog__sorting-link--active")?.classList.remove("catalog__sorting-link--active"),t.classList.add("catalog__sorting-link--active"),i()}}))}function initCheckoutProductsSlider(e){new Swiper(e,{slidesPerView:"auto",spaceBetween:10,grabCursor:!0,breakpoints:{1280:{slidesPerView:"auto",spaceBetween:5}}})}function initConsumersPhotosSlider(e){const t=e.querySelector(".consumers-photos__slider"),i=e.querySelector(".slider-arrows__button--prev"),s=e.querySelector(".slider-arrows__button--next"),r=e.querySelector(".slider-pagination");return new Swiper(t,{slidesPerView:"auto",spaceBetween:10,navigation:{prevEl:i,nextEl:s,disabledClass:"slider-arrows__button--disabled",lockClass:"slider-arrows__button--hidden"},pagination:{el:r,type:"progressbar"},breakpoints:{1280:{slidesPerView:4,spaceBetween:20}}})}function initConsumersPhotos(){let e=null,t=null;const i=document.querySelector(".consumers-photos__slider-wrapper");i&&(t=Array.from(i.querySelectorAll(".consumers-photos__slider-item ")),e=initConsumersPhotosSlider(i));let s=null,r=null;const o=document.querySelector('[data-modal="consumers-photos"]');o&&(r=initGallerySlider(o.querySelector(".gallery-slider")),s=new Modal(o,{onOpenerClick:e=>{const i=e.target.closest("li");if(i&&r){const e=t.indexOf(i);r.slideTo(e,0)}}}))}function initFolds(e){e.addEventListener("click",(e=>{let{target:t}=e;const i=t.closest(".folds__button");if(!i)return;const s=i.closest(".folds__item"),r=s.querySelector(".folds__item-content-wrapper"),o=r.querySelector(".folds__item-content"),n=o.getBoundingClientRect().height;r.style.height=`${n}px`,o.style.position="absolute",setTimeout((()=>{s.classList.toggle("folds__item--open")}),20),i.ariaExpanded="true"===i.ariaExpanded?"false":"true"})),e.addEventListener("transitionend",(e=>{let{target:t}=e;const i=t.closest(".folds__item");i&&i.classList.contains("folds__item--open")&&(t.classList.contains("folds__item-content")&&(t.style.position="static"),t.classList.contains("folds__item-content-wrapper")&&setTimeout((()=>{t.style.height="auto"}),0))}))}function initGallerySlider(e){const t=e.querySelector(".gallery-slider__slider"),i=e.querySelector(".slider-arrows__button--prev"),s=e.querySelector(".slider-arrows__button--next");return new Swiper(t,{effect:"creative",creativeEffect:{prev:{shadow:!0,translate:["-20%",0,-1]},next:{translate:["100%",0,0]}},speed:500,navigation:{prevEl:i,nextEl:s,disabledClass:"slider-arrows__button--disabled",lockClass:"slider-arrows__button--hidden"},grabCursor:!0})}function initMenu(e){document.querySelector(".site-header__burger");e.addEventListenerClick}function initPageScrollbar(e){return new SimpleBar(e,{classNames:{contentEl:"page__inner"}})}function initProductInfo(e){const t=t=>{e.querySelectorAll(".product-info__item--open").forEach((e=>{e!==t&&(e.classList.remove("product-info__item--open"),e.querySelector(".product-info__button").ariaExpanded="false")}))},i=()=>{const t=e.querySelector(".product-info__item"),i=t.querySelector(".product-info__button");t.classList.add("product-info__item--open"),i.ariaExpanded="true"};e.addEventListener("click",(e=>{let{target:i}=e;const s=i.closest(".product-info__button");if(!s)return;const r=s.closest(".product-info__item");laptopWidthMediaQueryList.matches&&t(r);const o=r.querySelector(".product-info__content-wrapper"),n=o.querySelector(".product-info__content"),l=n.getBoundingClientRect().height;o.style.height=`${l}px`,n.style.position="absolute",setTimeout((()=>{r.classList.toggle("product-info__item--open")}),20),s.ariaExpanded="true"===s.ariaExpanded?"false":"true"})),e.addEventListener("transitionend",(e=>{let{target:t}=e;const i=t.closest(".product-info__item");i&&i.classList.contains("product-info__item--open")&&(t.classList.contains("product-info__content")&&(t.style.position="static"),t.classList.contains("product-info__content-wrapper")&&setTimeout((()=>{t.style.height="auto"}),0))})),laptopWidthMediaQueryList.addEventListener("change",(()=>{laptopWidthMediaQueryList.matches&&(t(),i())})),i(),e.querySelectorAll(".product-info__content-wrapper").forEach((e=>{new SimpleBar(e,{autoHide:!1})}))}function initProduct(e){const t=e.querySelector(".product__slider");initProductInfo(e.querySelector(".product-info"));const i=document.querySelector('[data-modal="product-gallery"]'),s=Array.from(t.querySelectorAll(".product__slider-item")),r=Array.from(e.querySelectorAll(".product__image-wrapper, .product__video-wrapper")),o=i.querySelectorAll(".modal-gallery__list-item");new SimpleBar(i,{autoHide:!1}),new Modal(i,{onOpenerClick:e=>{let t;t=laptopWidthMediaQueryList.matches?r.indexOf(e.currentTarget):s.indexOf(e.currentTarget),setTimeout((()=>{o[t].scrollIntoView({behavior:"smooth"})}),400)}}),new Swiper(t,{effect:"creative",creativeEffect:{prev:{shadow:!0,translate:["-20%",0,-1]},next:{translate:["100%",0,0]}},speed:500,pagination:{el:".product__slider-pagination",bulletClass:"product__slider-pagination-button",bulletActiveClass:"product__slider-pagination-button--current",renderBullet:getPaginationButtonCreator(),clickable:!0}})}function initProductsCounters(e){const t=(e,t)=>{const i=+e.min;t.disabled=+e.value<=i};e.querySelectorAll(".counter").forEach((e=>{const i=e.querySelector(".counter__control"),s=e.querySelector(".counter__button--minus");t(i,s)})),e.addEventListener("click",(e=>{const i=e.target.closest(".counter__button");if(!i)return;const s=i.closest(".counter"),r=s.querySelector(".counter__control"),o=s.querySelector(".counter__button--minus");switch(!0){case i.matches(".counter__button--minus"):r.stepDown();break;case i.matches(".counter__button--plus"):r.stepUp()}t(r,o),r.dispatchEvent(inputEvent),r.dispatchEvent(changeEvent)}))}function initProducts(e){const t=e.querySelector(".products-slider"),i=e.querySelector(".slider-pagination"),s=e.querySelector(".slider-arrows__button--prev"),r=e.querySelector(".slider-arrows__button--next");new Swiper(t,{slidesPerView:"auto",spaceBetween:10,pagination:{el:i,type:"progressbar"},loop:!0,navigation:{prevEl:s,nextEl:r,disabledClass:"slider-arrows__button--disabled",lockClass:"slider-arrows__button--hidden"},breakpoints:{390:{slidesPerView:2,spaceBetween:10},580:{slidesPerView:3,spaceBetween:10},790:{slidesPerView:4,spaceBetween:10},1280:{slidesPerView:4,spaceBetween:20}}})}function initReviewSlider(e){const t=e.querySelector(".review__slider");new Swiper(t,{slidesPerView:"auto",spaceBetween:10,grabCursor:!0})}function initReviewsIntroPhotos(){let e=null,t=null;const i=document.querySelector(".reviews-intro__slider-wrapper");i&&(t=Array.from(i.querySelectorAll(".reviews-intro__slider-item:not(.reviews-intro__slider-item--quote)")),e=initReviewsIntroSlider(i));let s=null,r=null;const o=document.querySelector('[data-modal="reviews-intro-photos"]');if(o){const e=o.querySelector(".gallery-slider");r=initGallerySlider(e),s=new Modal(o,{onOpenerClick:e=>{const i=t.indexOf(e.currentTarget);r.slideTo(i,0)}})}}function initReviewsIntroSlider(e){const t=e.querySelector(".reviews-intro__slider"),i=e.querySelector(".slider-arrows__button--prev"),s=e.querySelector(".slider-arrows__button--next");new Swiper(t,{slidesPerView:"auto",spaceBetween:10,navigation:{prevEl:i,nextEl:s,disabledClass:"slider-arrows__button--disabled",lockClass:"slider-arrows__button--hidden"},breakpoints:{1280:{slidesPerView:4,spaceBetween:20}}})}function initSearch(e){const t=e.querySelector(".search-form__field-control"),i=e.querySelector(".search-form__field-clear-button"),s=()=>{setTimeout((()=>{i.classList.toggle("search-form__field-clear-button--hidden",!t.value)}))};s(),t.addEventListener("input",(()=>{s()})),e.addEventListener("click",(e=>{const i=e.target.closest(".search__placeholder .button");if(e.target.closest(".search-form__field-clear-button"))return t.value="",s(),t.focus(),t.dispatchEvent(inputEvent),void t.dispatchEvent(changeEvent);i&&(t.focus(),t.selectionStart=t.value.length)}))}function initSelect(e){new Choices(e,{searchEnabled:!1,itemSelectText:"",shouldSort:!1})}function initSetSlider(e){const t=e.querySelector(".set__slider-list"),i=t.querySelectorAll(".set__slider-item");let s=null;const r=()=>{laptopWidthMediaQueryList.matches?(s?.destroy(),e.classList.remove("swiper"),t.classList.remove("swiper-wrapper"),i.forEach((e=>e.classList.remove("swiper-slide")))):(e.classList.add("swiper"),t.classList.add("swiper-wrapper"),i.forEach((e=>e.classList.add("swiper-slide"))),s=new Swiper(e,{effect:"creative",creativeEffect:{prev:{shadow:!0,translate:["-20%",0,-1]},next:{translate:["100%",0,0]}},speed:500,pagination:{el:".set__slider-pagination",bulletClass:"set__slider-pagination-button",bulletActiveClass:"set__slider-pagination-button--current",renderBullet:getPaginationButtonCreator(),clickable:!0}}))};laptopWidthMediaQueryList.addEventListener("change",r),r()}function initSet(e){const t=e.querySelector(".set__slider"),i=Array.from(t.querySelectorAll(".set__slider-item"));console.log(i);const s=document.querySelector('[data-modal="set-gallery"]'),r=s.querySelectorAll(".modal-gallery__list-item");new SimpleBar(s,{autoHide:!1}),console.log(r),new Modal(s,{onOpenerClick:e=>{const t=i.indexOf(e.currentTarget);console.log("Click on",e.currentTarget),setTimeout((()=>{r[t].scrollIntoView({behavior:"smooth"})}),400)}}),initSetSlider(t)}function initShopSlider(e){const t=e.querySelector(".shop__main-slider"),i=e.querySelector(".shop__thumbnails-slider"),s=e.querySelector(".slider-arrows__button--prev"),r=e.querySelector(".slider-arrows__button--next"),o=new Swiper(i,{watchSlidesProgress:!0,slidesPerView:"auto",spaceBetween:10});new Swiper(t,{spaceBetween:10,navigation:{prevEl:s,nextEl:r,disabledClass:"slider-arrows__button--disabled",lockClass:"slider-arrows__button--hidden"},grabCursor:!0,thumbs:{swiper:o,slideThumbActiveClass:"shop__thumbnails-slider-item--active"},breakpoints:{390:{slidesPerView:"auto",spaceBetween:10},1280:{slidesPerView:4,spaceBetween:20}}})}function showAlert(e){let{heading:t,button:i={},icon:s}=e;const r=new Alert({heading:t,button:i,icon:s});return requestAnimationFrame((()=>r.open())),r}function initSimpleFilterSlider(e){const t=e.querySelector(".simple-filter__slider"),i=e.querySelector(".slider-arrows__button--prev"),s=e.querySelector(".slider-arrows__button--next");new Swiper(t,{slidesPerView:"auto",spaceBetween:30,centeredSlides:!0,centeredSlidesBounds:!0,navigation:{prevEl:i,nextEl:s,disabledClass:"slider-arrows__button--disabled-hidden",lockClass:"slider-arrows__button--hidden"},grabCursor:!0,breakpoints:{1280:{slidesPerView:"auto",spaceBetween:40},1600:{slidesPerView:"auto",spaceBetween:60}}})}function initSiteHeader(e,t){let i=0;const s=()=>{const s=e.offsetHeight;t.scrollTop>0&&e.classList.add("site-header--sticked"),t.scrollTop>i&&t.scrollTop>s?e.classList.add("site-header--hidden"):(e.classList.remove("site-header--hidden"),0===t.scrollTop&&e.classList.remove("site-header--sticked")),i=t.scrollTop};s(),t.addEventListener("scroll",throttleAndDebounce(s,50));const r=e.querySelector(".site-header__burger"),o=()=>{e.classList.remove("site-header--menu-open"),r.ariaExpanded=!1,unlockPageScroll()};r.addEventListener("click",(()=>{"true"===r.ariaExpanded?o():(e.classList.add("site-header--menu-open"),r.ariaExpanded=!0,lockPageScroll())}));const n=e.querySelectorAll(".site-header__search-button"),l=e.querySelectorAll('[class^="site-header__search-close-button"]'),a=()=>{e.classList.add("site-header--search-open"),lockPageScroll()},c=()=>{e.classList.remove("site-header--search-open"),unlockPageScroll()};n.forEach((e=>{e.addEventListener("click",a)})),l.forEach((e=>{e.addEventListener("click",c)}));const d=e.querySelectorAll(".site-navigation__link--opener");d.forEach((t=>{t.parentElement.addEventListener("mouseover",(()=>{laptopWidthMediaQueryList.matches&&e.classList.add("site-header--menu-open")}))})),d.forEach((t=>{t.parentElement.addEventListener("mouseout",(()=>{laptopWidthMediaQueryList.matches&&e.classList.remove("site-header--menu-open")}))})),laptopWidthMediaQueryList.addEventListener("change",(()=>{o(),c()}))}function initSiteNavigation(e){e.addEventListener("click",(e=>{if(laptopWidthMediaQueryList.matches)return;const t=e.target.closest(".site-navigation__link--opener");t&&(e.preventDefault(),t.classList.toggle("site-navigation__link--active"))}))}function initSizeChart(e){const t=e.querySelector("div");new SimpleBar(t,{autoHide:!1})}const laptopWidthMediaQueryList=window.matchMedia("(min-width: 1280px)"),inputEvent=new Event("input",{bubbles:!0}),changeEvent=new Event("change",{bubbles:!0}),simpleBar=initPageScrollbar(document.querySelector(".page__scroll-wrapper"));initSiteHeader(document.querySelector(".site-header"),simpleBar.getScrollElement()),initSiteNavigation(document.querySelector(".site-navigation")),document.querySelectorAll(".article__photos").forEach(initArticlePhotos),document.querySelectorAll(".article__seasons-slider-wrapper").forEach(initArticleSeasons),document.querySelectorAll(".taber").forEach((e=>new Taber(e))),document.querySelectorAll(".size-chart").forEach(initSizeChart),document.querySelectorAll(".video").forEach((e=>new Video(e))),document.querySelectorAll(".shop__slider-wrapper").forEach(initShopSlider),document.querySelectorAll(".simple-filter__slider-wrapper").forEach(initSimpleFilterSlider),document.querySelectorAll(".review__slider-wrapper").forEach(initReviewSlider),document.querySelectorAll(".brands").forEach(initBrandsSlider),document.querySelectorAll(".catalog-preview .products-slider").forEach(initCatalogPreviewSlider),document.querySelectorAll(".search, .site-header__search").forEach(initSearch),document.querySelectorAll(".folds").forEach(initFolds),document.querySelectorAll(".products").forEach(initProducts),document.querySelectorAll(".product").forEach(initProduct),document.querySelectorAll('[data-modal="offer"]').forEach((e=>new Modal(e))),document.querySelectorAll('[data-modal="size-chart"]').forEach((e=>new Modal(e))),document.querySelectorAll('[data-modal="manager-contacts"]').forEach((e=>new Modal(e))),document.querySelectorAll(".set").forEach(initSet),document.querySelectorAll(".cart__form, .product__cart").forEach(initProductsCounters),document.querySelectorAll(".catalog__sorting").forEach(initCatalogSorting),document.querySelectorAll(".catalog").forEach((e=>{initCatalogFilter(e,simpleBar.getScrollElement())})),document.querySelectorAll(".select").forEach(initSelect),document.querySelectorAll(".checkout-order__products").forEach(initCheckoutProductsSlider);let subscriptionForm=null,subscriptionFormElement=document.querySelector(".subscription-form");subscriptionFormElement&&(subscriptionForm=new Form(subscriptionFormElement));let reviews=null,reviewsElement=document.querySelector(".reviews");reviewsElement&&(reviews=new Reviews(reviewsElement));let product=null,productElement=document.querySelector(".product");productElement&&(product=new Product(productElement));let modalEntry=null;const modalEntryElement=document.querySelector('[data-modal="entry"]');modalEntryElement&&(modalEntry=new ModalEntry(modalEntryElement)),initReviewsIntroPhotos(),initConsumersPhotos();